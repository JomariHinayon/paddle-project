{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/jomari/Desktop/paddle-project/src/lib/firebase.js"],"sourcesContent":["\"use client\";\n\n// lib/firebase.ts\nimport { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth, GoogleAuthProvider, EmailAuthProvider, applyActionCode } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\nimport { getFunctions, connectFunctionsEmulator } from \"firebase/functions\";\nimport { getAnalytics, isSupported } from \"firebase/analytics\";\nimport { getPerformance, initializePerformance } from \"firebase/performance\";\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: \"G-1R6HX54FVL\"\n};\n\n// Initialize Firebase\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\n\n// Authentication\nexport const auth = getAuth(app);\nauth.useDeviceLanguage(); // For better auth flows\n\n// Providers\nexport const googleProvider = new GoogleAuthProvider();\ngoogleProvider.addScope('profile');\ngoogleProvider.addScope('email');\ngoogleProvider.setCustomParameters({\n  prompt: 'select_account'\n}); // Better UX for Google Auth\n\nexport const emailProvider = new EmailAuthProvider();\n\n// Firestore Database\nexport const firestore = getFirestore(app);\n\n// Cloud Storage\nexport const storage = getStorage(app);\n\n// Cloud Functions\nexport const functions = getFunctions(app);\n\n// Analytics - only initialize in browser environment\nexport const initAnalytics = async () => {\n  if (typeof window !== 'undefined') {\n    const analyticsSupported = await isSupported();\n    if (analyticsSupported) {\n      return getAnalytics(app);\n    }\n  }\n  return null;\n};\n\n// Performance monitoring is disabled to avoid attribute errors\n// If you need to enable it in the future, you can uncomment and modify the code below\n/*\nexport const initPerformance = () => {\n  if (typeof window !== 'undefined') {\n    try {\n      const perf = getPerformance(app);\n      return perf;\n    } catch (error) {\n      console.warn('Firebase Performance initialization error:', error);\n      return null;\n    }\n  }\n  return null;\n};\n\n// Initialize Performance with proper config when in browser\nif (typeof window !== 'undefined') {\n  // We'll initialize performance monitoring but with a delay to ensure the DOM is loaded\n  setTimeout(() => {\n    initPerformance();\n  }, 2000);\n}\n*/\n\n// Emulator setup (for development)\nif (process.env.NODE_ENV === 'development') {\n  connectFunctionsEmulator(functions, 'localhost', 5001);\n  // Note: Auth emulator needs to be set up in your auth flows\n}\n\n// Utility function to get current user token\nexport const getCurrentUserToken = async () => {\n  try {\n    const user = auth.currentUser;\n    if (!user) return null;\n    return await user.getIdToken();\n  } catch (error) {\n    console.error('Error getting user token:', error);\n    return null;\n  }\n};\n\n// Re-export applyActionCode for use in auth pages\nexport { applyActionCode };"],"names":[],"mappings":";;;;;;;;;;AAaU;AAXV,kBAAkB;AAClB;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AARA;;;;;;;;AAWA,wCAAwC;AACxC,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,eAAe;AACjB;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAA,GAAA,uLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,KAAK,IAAI,CAAA,GAAA,uLAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,uLAAA,CAAA,UAAO,AAAD,GAAG,CAAC,EAAE;AAG1E,MAAM,OAAO,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE;AAC5B,KAAK,iBAAiB,IAAI,wBAAwB;AAG3C,MAAM,iBAAiB,IAAI,wNAAA,CAAA,qBAAkB;AACpD,eAAe,QAAQ,CAAC;AACxB,eAAe,QAAQ,CAAC;AACxB,eAAe,mBAAmB,CAAC;IACjC,QAAQ;AACV,IAAI,4BAA4B;AAEzB,MAAM,gBAAgB,IAAI,uNAAA,CAAA,oBAAiB;AAG3C,MAAM,YAAY,CAAA,GAAA,sKAAA,CAAA,eAAY,AAAD,EAAE;AAG/B,MAAM,UAAU,CAAA,GAAA,oKAAA,CAAA,aAAU,AAAD,EAAE;AAG3B,MAAM,YAAY,CAAA,GAAA,6KAAA,CAAA,eAAY,AAAD,EAAE;AAG/B,MAAM,gBAAgB;IAC3B,wCAAmC;QACjC,MAAM,qBAAqB,MAAM,CAAA,GAAA,6KAAA,CAAA,cAAW,AAAD;QAC3C,IAAI,oBAAoB;YACtB,OAAO,CAAA,GAAA,6KAAA,CAAA,eAAY,AAAD,EAAE;QACtB;IACF;IACA,OAAO;AACT;AAEA,+DAA+D;AAC/D,sFAAsF;AACtF;;;;;;;;;;;;;;;;;;;;;AAqBA,GAEA,mCAAmC;AACnC,wCAA4C;IAC1C,CAAA,GAAA,6KAAA,CAAA,2BAAwB,AAAD,EAAE,WAAW,aAAa;AACjD,4DAA4D;AAC9D;AAGO,MAAM,sBAAsB;IACjC,IAAI;QACF,MAAM,OAAO,KAAK,WAAW;QAC7B,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,MAAM,KAAK,UAAU;IAC9B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/jomari/Desktop/paddle-project/src/lib/session.ts"],"sourcesContent":["'use client';\n\nimport { auth } from './firebase';\n\nexport const setSession = async () => {\n  const user = auth.currentUser;\n  if (user) {\n    const idToken = await user.getIdToken();\n    \n    // Call the session API to create a proper session cookie\n    try {\n      const response = await fetch('/api/auth/session', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ idToken }),\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to set session');\n      }\n      \n      // The session cookie is now set by the API\n      return true;\n    } catch (error) {\n      console.error('Error setting session:', error);\n      return false;\n    }\n  }\n  return false;\n};\n\nexport const clearSession = async () => {\n  try {\n    // Call the logout API to revoke the session\n    await fetch('/api/auth/logout', {\n      method: 'POST',\n      credentials: 'include',\n    });\n    \n    // Clear local storage and session storage\n    localStorage.removeItem('user');\n    sessionStorage.clear();\n    \n    return true;\n  } catch (error) {\n    console.error('Error clearing session:', error);\n    \n    // Fallback to client-side cookie clearing if the API fails\n    document.cookie = 'session=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; secure';\n    localStorage.removeItem('user');\n    sessionStorage.clear();\n    \n    return false;\n  }\n};\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAFA;;AAIO,MAAM,aAAa;IACxB,MAAM,OAAO,yIAAA,CAAA,OAAI,CAAC,WAAW;IAC7B,IAAI,MAAM;QACR,MAAM,UAAU,MAAM,KAAK,UAAU;QAErC,yDAAyD;QACzD,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,qBAAqB;gBAChD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAQ;YACjC;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,2CAA2C;YAC3C,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,OAAO;QACT;IACF;IACA,OAAO;AACT;AAEO,MAAM,eAAe;IAC1B,IAAI;QACF,4CAA4C;QAC5C,MAAM,MAAM,oBAAoB;YAC9B,QAAQ;YACR,aAAa;QACf;QAEA,0CAA0C;QAC1C,aAAa,UAAU,CAAC;QACxB,eAAe,KAAK;QAEpB,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QAEzC,2DAA2D;QAC3D,SAAS,MAAM,GAAG;QAClB,aAAa,UAAU,CAAC;QACxB,eAAe,KAAK;QAEpB,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///Users/jomari/Desktop/paddle-project/src/components/LogoutButton.tsx"],"sourcesContent":["'use client';\n\nimport { signOut } from 'firebase/auth';\nimport { auth } from '@/lib/firebase';\nimport { clearSession } from '@/lib/session';\nimport { useRouter } from 'next/navigation';\nimport { useState } from 'react';\n\ninterface LogoutButtonProps {\n  className?: string;\n}\n\nexport default function LogoutButton({ className = '' }: LogoutButtonProps) {\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n\n  const handleLogout = async () => {\n    try {\n      setLoading(true);\n      await signOut(auth);\n      clearSession();\n      router.replace('/login');\n    } catch (error) {\n      console.error('Error signing out:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <button\n      onClick={handleLogout}\n      disabled={loading}\n      className={`flex items-center ${className}`}\n    >\n      {loading ? (\n        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-current\" />\n      ) : (\n        'Logout'\n      )}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;;;AANA;;;;;;AAYe,SAAS,aAAa,EAAE,YAAY,EAAE,EAAqB;;IACxE,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,eAAe;QACnB,IAAI;YACF,WAAW;YACX,MAAM,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE,yIAAA,CAAA,OAAI;YAClB,CAAA,GAAA,wHAAA,CAAA,eAAY,AAAD;YACX,OAAO,OAAO,CAAC;QACjB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;QACtC,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QACC,SAAS;QACT,UAAU;QACV,WAAW,CAAC,kBAAkB,EAAE,WAAW;kBAE1C,wBACC,6LAAC;YAAI,WAAU;;;;;mBAEf;;;;;;AAIR;GA9BwB;;QACP,qIAAA,CAAA,YAAS;;;KADF","debugId":null}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///Users/jomari/Desktop/paddle-project/src/components/UserProfileCard.tsx"],"sourcesContent":["'use client';\n\nimport { User } from 'firebase/auth';\nimport Image from 'next/image';\n\ninterface UserProfileCardProps {\n  user: User | null;\n}\n\nexport default function UserProfileCard({ user }: UserProfileCardProps) {\n  const getProfileImage = () => {\n    if (user?.photoURL) {\n      // Handle Google photo URL\n      return (\n        <Image \n          src={user.photoURL}\n          alt={user.displayName || 'Profile'}\n          width={64}\n          height={64}\n          className=\"rounded-full\"\n          priority\n        />\n      );\n    }\n\n    return (\n      <div className=\"h-16 w-16 rounded-full bg-violet-100 flex items-center justify-center\">\n        <span className=\"text-2xl text-violet-600\">\n          {(user?.displayName?.[0] || user?.email?.[0] || '?').toUpperCase()}\n        </span>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\n      <div className=\"flex items-center space-x-4\">\n        {getProfileImage()}\n        <div>\n          <h2 className=\"text-xl font-semibold text-gray-800\">\n            {user?.displayName || user?.email?.split('@')[0] || 'User'}\n          </h2>\n          <p className=\"text-gray-500\">{user?.email}</p>\n        </div>\n      </div>\n      \n      <div className=\"mt-6 border-t pt-4\">\n        <div className=\"flex justify-between items-center\">\n          <span className=\"text-sm text-gray-500\">Account Status</span>\n          <span className=\"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800\">\n            Active\n          </span>\n        </div>\n        {/* <div className=\"flex justify-between items-center mt-2\">\n          <span className=\"text-sm text-gray-500\">Subscription</span>\n          <span className=\"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800\">\n            Free Plan\n          </span>\n        </div> */}\n        <div className=\"flex justify-between items-center mt-2\">\n          <span className=\"text-sm text-gray-500\">Email Verified</span>\n          <span className={`px-2 py-1 text-xs rounded-full ${\n            user?.emailVerified \n              ? 'bg-green-100 text-green-800' \n              : 'bg-yellow-100 text-yellow-800'\n          }`}>\n            {user?.emailVerified ? 'Verified' : 'Pending'}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;AASe,SAAS,gBAAgB,EAAE,IAAI,EAAwB;IACpE,MAAM,kBAAkB;QACtB,IAAI,MAAM,UAAU;YAClB,0BAA0B;YAC1B,qBACE,6LAAC,gIAAA,CAAA,UAAK;gBACJ,KAAK,KAAK,QAAQ;gBAClB,KAAK,KAAK,WAAW,IAAI;gBACzB,OAAO;gBACP,QAAQ;gBACR,WAAU;gBACV,QAAQ;;;;;;QAGd;QAEA,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAK,WAAU;0BACb,CAAC,MAAM,aAAa,CAAC,EAAE,IAAI,MAAM,OAAO,CAAC,EAAE,IAAI,GAAG,EAAE,WAAW;;;;;;;;;;;IAIxE;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;oBACZ;kCACD,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CACX,MAAM,eAAe,MAAM,OAAO,MAAM,IAAI,CAAC,EAAE,IAAI;;;;;;0CAEtD,6LAAC;gCAAE,WAAU;0CAAiB,MAAM;;;;;;;;;;;;;;;;;;0BAIxC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAwB;;;;;;0CACxC,6LAAC;gCAAK,WAAU;0CAA6D;;;;;;;;;;;;kCAU/E,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAwB;;;;;;0CACxC,6LAAC;gCAAK,WAAW,CAAC,+BAA+B,EAC/C,MAAM,gBACF,gCACA,iCACJ;0CACC,MAAM,gBAAgB,aAAa;;;;;;;;;;;;;;;;;;;;;;;;AAMhD;KA/DwB","debugId":null}},
    {"offset": {"line": 420, "column": 0}, "map": {"version":3,"sources":["file:///Users/jomari/Desktop/paddle-project/src/lib/paddle-config.ts"],"sourcesContent":["export const PADDLE_CONFIG = {\n  clientToken: process.env.NEXT_PUBLIC_PADDLE_CLIENT_TOKEN || '',\n  sellerId: process.env.NEXT_PUBLIC_PADDLE_SELLER_ID || '',\n  prices: {\n    standard: {\n      month: process.env.NEXT_PUBLIC_PADDLE_STANDARD_MONTH_PRICE_ID || 'pri_01h8xz97pj0000000000000000',\n      year: process.env.NEXT_PUBLIC_PADDLE_STANDARD_YEAR_PRICE_ID || 'pri_01h8xz97pj0000000000000000'\n    },\n    premium: {\n      month: process.env.NEXT_PUBLIC_PADDLE_PREMIUM_MONTH_PRICE_ID || 'pri_01h8xz97pj0000000000000000',\n      year: process.env.NEXT_PUBLIC_PADDLE_PREMIUM_YEAR_PRICE_ID || 'pri_01h8xz97pj0000000000000000'\n    }\n  },\n  planDetails: {\n    standard: {\n      name: 'Standard Plan',\n      features: ['Core application features', 'Email support', 'Basic analytics']\n    },\n    premium: {\n      name: 'Premium Plan',\n      features: ['All Standard features', 'Priority support', 'Advanced analytics', 'Custom integrations', 'Team collaboration tools']\n    }\n  },\n  checkoutUrl: 'https://checkout.paddle.com/checkout',\n  customerPortalUrl: 'https://checkout.paddle.com/customer',\n  customerPortalLink: process.env.NEXT_PUBLIC_PADDLE_CUSTOMER_PORTAL_LINK || 'https://sandbox-customer-portal.paddle.com/cpl_01jtqjeq79c64enc8qy3cs3zrm'\n};\n\nexport type PlanType = keyof typeof PADDLE_CONFIG.prices;\nexport type BillingCycle = keyof typeof PADDLE_CONFIG.prices.standard;\n\nexport const identifyPriceId = (priceId: string): { plan: PlanType; cycle: BillingCycle } | null => {\n  for (const [plan, cycles] of Object.entries(PADDLE_CONFIG.prices)) {\n    for (const [cycle, id] of Object.entries(cycles)) {\n      if (id === priceId) {\n        return { \n          plan: plan as PlanType, \n          cycle: cycle as BillingCycle \n        };\n      }\n    }\n  }\n  return null;\n};\n\nexport const getPlanDetails = (priceId: string) => {\n  const identified = identifyPriceId(priceId);\n  if (!identified) return null;\n  \n  return {\n    ...PADDLE_CONFIG.planDetails[identified.plan],\n    billingCycle: identified.cycle,\n    priceId\n  };\n};\n\nexport interface PaddleTransaction {\n  items?: Array<{\n    price?: {\n      id?: string;\n      product_id?: string;\n    }\n  }>;\n  status?: string;\n  total?: number;\n  currency_code?: string;\n}\n\nexport const getPlanFromTransaction = (transaction: PaddleTransaction) => {\n  const priceId = transaction.items?.[0]?.price?.id;\n  if (!priceId) return null;\n  \n  const planInfo = identifyPriceId(priceId);\n  if (!planInfo) return null;\n\n  return {\n    ...PADDLE_CONFIG.planDetails[planInfo.plan],\n    billingCycle: planInfo.cycle,\n    priceId,\n    amount: transaction.total,\n    currency: transaction.currency_code,\n    status: transaction.status\n  };\n};\n\nexport const matchTransactionPlan = (productId: string | undefined) => {\n  if (!productId) return null;\n  \n  // Flatten price IDs for lookup\n  const priceMap = Object.entries(PADDLE_CONFIG.prices).reduce((acc, [plan, cycles]) => {\n    Object.entries(cycles).forEach(([cycle, id]) => {\n      acc[id] = { plan: plan as PlanType, cycle: cycle as BillingCycle };\n    });\n    return acc;\n  }, {} as Record<string, { plan: PlanType; cycle: BillingCycle }>);\n  \n  return priceMap[productId] || null;\n};\n"],"names":[],"mappings":";;;;;;;AACe;AADR,MAAM,gBAAgB;IAC3B,aAAa,wEAA+C;IAC5D,UAAU,6CAA4C;IACtD,QAAQ;QACN,UAAU;YACR,OAAO,sEAA0D;YACjE,MAAM,sEAAyD;QACjE;QACA,SAAS;YACP,OAAO,sEAAyD;YAChE,MAAM,sEAAwD;QAChE;IACF;IACA,aAAa;QACX,UAAU;YACR,MAAM;YACN,UAAU;gBAAC;gBAA6B;gBAAiB;aAAkB;QAC7E;QACA,SAAS;YACP,MAAM;YACN,UAAU;gBAAC;gBAAyB;gBAAoB;gBAAsB;gBAAuB;aAA2B;QAClI;IACF;IACA,aAAa;IACb,mBAAmB;IACnB,oBAAoB,kFAAuD;AAC7E;AAKO,MAAM,kBAAkB,CAAC;IAC9B,KAAK,MAAM,CAAC,MAAM,OAAO,IAAI,OAAO,OAAO,CAAC,cAAc,MAAM,EAAG;QACjE,KAAK,MAAM,CAAC,OAAO,GAAG,IAAI,OAAO,OAAO,CAAC,QAAS;YAChD,IAAI,OAAO,SAAS;gBAClB,OAAO;oBACL,MAAM;oBACN,OAAO;gBACT;YACF;QACF;IACF;IACA,OAAO;AACT;AAEO,MAAM,iBAAiB,CAAC;IAC7B,MAAM,aAAa,gBAAgB;IACnC,IAAI,CAAC,YAAY,OAAO;IAExB,OAAO;QACL,GAAG,cAAc,WAAW,CAAC,WAAW,IAAI,CAAC;QAC7C,cAAc,WAAW,KAAK;QAC9B;IACF;AACF;AAcO,MAAM,yBAAyB,CAAC;IACrC,MAAM,UAAU,YAAY,KAAK,EAAE,CAAC,EAAE,EAAE,OAAO;IAC/C,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,WAAW,gBAAgB;IACjC,IAAI,CAAC,UAAU,OAAO;IAEtB,OAAO;QACL,GAAG,cAAc,WAAW,CAAC,SAAS,IAAI,CAAC;QAC3C,cAAc,SAAS,KAAK;QAC5B;QACA,QAAQ,YAAY,KAAK;QACzB,UAAU,YAAY,aAAa;QACnC,QAAQ,YAAY,MAAM;IAC5B;AACF;AAEO,MAAM,uBAAuB,CAAC;IACnC,IAAI,CAAC,WAAW,OAAO;IAEvB,+BAA+B;IAC/B,MAAM,WAAW,OAAO,OAAO,CAAC,cAAc,MAAM,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,OAAO;QAC/E,OAAO,OAAO,CAAC,QAAQ,OAAO,CAAC,CAAC,CAAC,OAAO,GAAG;YACzC,GAAG,CAAC,GAAG,GAAG;gBAAE,MAAM;gBAAkB,OAAO;YAAsB;QACnE;QACA,OAAO;IACT,GAAG,CAAC;IAEJ,OAAO,QAAQ,CAAC,UAAU,IAAI;AAChC","debugId":null}},
    {"offset": {"line": 524, "column": 0}, "map": {"version":3,"sources":["file:///Users/jomari/Desktop/paddle-project/src/lib/paddle-utils.ts"],"sourcesContent":["import { PADDLE_CONFIG } from '@/lib/paddle-config';\n\ninterface TransactionData {\n  checkoutId: string;\n  transactionId: string;\n  status: string;\n  total: number;\n  currency: string;\n  items: Array<{\n    price: {\n      product_id: string;\n      description?: string;\n    };\n  }>;\n  paddleEventData: any;\n}\n\ninterface PlanInfo {\n  name: string;\n  tier: 'standard' | 'premium';\n  interval: 'month' | 'year';\n  description?: string;\n  features?: string[];\n}\n\nexport interface PaddlePlan {\n  name: string;\n  features: string[];\n  description?: string;\n  tier?: 'standard' | 'premium';\n  interval?: 'month' | 'year';\n}\n\n// Export the PADDLE_PLANS object\nexport const PADDLE_PLANS: Record<string, PaddlePlan> = {\n  // Standard monthly plan\n  [PADDLE_CONFIG.prices.standard.month]: {\n    name: 'Standard Monthly',\n    tier: 'standard',\n    interval: 'month',\n    description: 'Basic features with monthly billing',\n    features: PADDLE_CONFIG.planDetails.standard.features\n  },\n  \n  // Standard yearly plan\n  [PADDLE_CONFIG.prices.standard.year]: {\n    name: 'Standard Yearly',\n    tier: 'standard',\n    interval: 'year',\n    description: 'Basic features with yearly billing (save 16%)',\n    features: PADDLE_CONFIG.planDetails.standard.features\n  },\n  \n  // Premium monthly plan\n  [PADDLE_CONFIG.prices.premium.month]: {\n    name: 'Premium Monthly',\n    tier: 'premium',\n    interval: 'month',\n    description: 'Advanced features with monthly billing',\n    features: PADDLE_CONFIG.planDetails.premium.features\n  },\n  \n  // Premium yearly plan\n  [PADDLE_CONFIG.prices.premium.year]: {\n    name: 'Premium Yearly',\n    tier: 'premium',\n    interval: 'year',\n    description: 'Advanced features with yearly billing (save 16%)',\n    features: PADDLE_CONFIG.planDetails.premium.features\n  }\n};\n\n/**\n * Identifies a plan based on the planId from Paddle\n * \n * @param planId The Paddle plan ID to identify\n * @returns Information about the plan or null if not found\n */\nexport function identifyPlan(planId: string): PlanInfo | null {\n  // Check standard plans\n  if (planId === PADDLE_CONFIG.prices.standard.month) {\n    return {\n      name: 'Standard Monthly',\n      tier: 'standard',\n      interval: 'month',\n      description: 'Basic features with monthly billing',\n      features: PADDLE_CONFIG.planDetails.standard.features\n    };\n  }\n\n  if (planId === PADDLE_CONFIG.prices.standard.year) {\n    return {\n      name: 'Standard Yearly',\n      tier: 'standard',\n      interval: 'year',\n      description: 'Basic features with yearly billing (save 16%)',\n      features: PADDLE_CONFIG.planDetails.standard.features\n    };\n  }\n\n  // Check premium plans\n  if (planId === PADDLE_CONFIG.prices.premium.month) {\n    return {\n      name: 'Premium Monthly',\n      tier: 'premium',\n      interval: 'month',\n      description: 'Advanced features with monthly billing',\n      features: PADDLE_CONFIG.planDetails.premium.features\n    };\n  }\n\n  if (planId === PADDLE_CONFIG.prices.premium.year) {\n    return {\n      name: 'Premium Yearly',\n      tier: 'premium',\n      interval: 'year',\n      description: 'Advanced features with yearly billing (save 16%)',\n      features: PADDLE_CONFIG.planDetails.premium.features\n    };\n  }\n\n  return null;\n}\n\n/**\n * Formats a Paddle price amount for display\n * \n * @param amount The price amount in cents/smallest currency unit\n * @param currencyCode The currency code (default: USD)\n * @returns Formatted price string\n */\nexport function formatPrice(amount: number, currencyCode: string = 'USD'): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currencyCode,\n    minimumFractionDigits: 2\n  }).format(amount / 100);\n}\n\n/**\n * Creates a valid checkout URL for Paddle\n * \n * @param priceId The Paddle price ID to create checkout for\n * @param customerId Optional customer ID for existing customers\n * @param customerEmail Optional customer email for prefilling checkout\n * @returns Full checkout URL\n */\nexport function createCheckoutUrl(\n  priceId: string, \n  customerId?: string, \n  customerEmail?: string\n): string {\n  const baseUrl = PADDLE_CONFIG.checkoutUrl;\n  const queryParams = new URLSearchParams();\n  \n  // Add the price ID as an item\n  queryParams.append('items[0][priceId]', priceId);\n  queryParams.append('items[0][quantity]', '1');\n  \n  // Add customer ID if provided\n  if (customerId) {\n    queryParams.append('customer[id]', customerId);\n  }\n  \n  // Add customer email if provided\n  if (customerEmail) {\n    queryParams.append('customer[email]', customerEmail);\n  }\n  \n  // Add success and cancel URLs if needed\n  // queryParams.append('successUrl', window.location.origin + '/checkout/success');\n  // queryParams.append('cancelUrl', window.location.origin + '/checkout/cancel');\n  \n  return `${baseUrl}?${queryParams.toString()}`;\n}\n\nexport const getTransactionDetails = (transaction: TransactionData) => {\n  const productId = transaction.items?.[0]?.price?.product_id;\n  const plan = identifyPlan(productId);\n  \n  return {\n    ...plan,\n    amount: `${transaction.total} ${transaction.currency}`,\n    status: transaction.status,\n    checkoutId: transaction.checkoutId,\n    transactionId: transaction.transactionId,\n    rawProductId: productId,\n    purchaseDate: transaction.paddleEventData?.created_at,\n  };\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"sources":["file:///Users/jomari/Desktop/paddle-project/src/components/PaddleCheckoutHandler.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { getFirestore, doc, setDoc, collection, updateDoc } from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\n\ninterface PaddleCheckoutHandlerProps {\n  onSuccess?: (subscriptionData: any) => void;\n  onError?: (error: Error) => void;\n}\n\ninterface SubscriptionResponse {\n  subscriptionId: string;\n  status: string;\n  planId: string;\n  nextBillDate: string | null;\n  customerId: string;\n}\n\nexport default function PaddleCheckoutHandler({ onSuccess, onError }: PaddleCheckoutHandlerProps) {\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [checkoutId, setCheckoutId] = useState<string | null>(null);\n  const [customerId, setCustomerId] = useState<string | null>(null);\n  \n  // Get checkout and customer ID from URL if present\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const params = new URLSearchParams(window.location.search);\n      const id = params.get('checkout_id');\n      const customer = params.get('customer_id');\n      \n      if (id) setCheckoutId(id);\n      if (customer) setCustomerId(customer);\n    }\n  }, []);\n  \n  // Process the checkout completion if we have the necessary data\n  useEffect(() => {\n    const processCheckout = async () => {\n      if (!checkoutId || !customerId || isProcessing) return;\n      \n      setIsProcessing(true);\n      \n      try {\n        const auth = getAuth();\n        const user = auth.currentUser;\n        \n        if (!user) {\n          throw new Error('User not authenticated');\n        }\n        \n        // Instead of storing checkout data, we'll just pass it to the verification endpoint\n        console.log('Processing checkout - calling verification endpoint');\n        \n        // Call our server endpoint to verify and process the checkout\n        const response = await fetch('/api/subscriptions/verify-checkout', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            checkoutId,\n            customerId,\n            userId: user.uid,\n            email: user.email\n          }),\n        });\n        \n        if (!response.ok) {\n          // If API call fails, we'll rely on webhooks to update the subscription later\n          console.log('Subscription details not available yet, webhooks will update later');\n          \n          // Clear URL parameters\n          window.history.replaceState({}, document.title, window.location.pathname);\n          \n          if (onSuccess) {\n            onSuccess({\n              subscriptionId: 'pending',\n              status: 'processing',\n              customerId,\n            });\n          }\n          \n          return;\n        }\n        \n        const subscriptionData: SubscriptionResponse = await response.json();\n        console.log('Subscription details retrieved from API:', subscriptionData);\n        \n        // Only update user record if we have a valid subscription ID (not 'pending')\n        if (subscriptionData.subscriptionId && subscriptionData.subscriptionId !== 'pending') {\n          // Update user record with subscription details\n          const db = getFirestore();\n          const userRef = doc(db, 'users', user.uid);\n          await setDoc(userRef, {\n            hasActiveSubscription: true,\n            currentSubscriptionId: subscriptionData.subscriptionId,\n            subscriptionStatus: subscriptionData.status,\n            currentPlan: subscriptionData.planId,\n            nextBillDate: subscriptionData.nextBillDate ? new Date(subscriptionData.nextBillDate) : null,\n            paddleCustomerId: customerId,\n            lastCheckoutDate: new Date()\n          }, { merge: true });\n        } else {\n          console.log('No valid subscription ID received, waiting for webhook events');\n        }\n        \n        // Clear URL parameters\n        window.history.replaceState({}, document.title, window.location.pathname);\n        \n        if (onSuccess) {\n          onSuccess(subscriptionData);\n        }\n      } catch (error: any) {\n        console.error('Error processing checkout:', error);\n        if (onError) {\n          onError(error);\n        }\n      } finally {\n        setIsProcessing(false);\n      }\n    };\n    \n    processCheckout();\n  }, [checkoutId, customerId, isProcessing, onSuccess, onError]);\n  \n  // This component doesn't render anything\n  return null;\n} "],"names":[],"mappings":"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","debugId":null}}]
}